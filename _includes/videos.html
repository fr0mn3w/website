<!-- _includes/video.html -->
{% if include.file %}
  <!-- Self-hosted video -->
  <div class="video-container">
    <video controls 
           preload="metadata"
           {% if include.poster %}poster="/assets/videos/thumbnails/{{ include.poster }}"{% endif %}
           {% if include.width %}style="max-width: {{ include.width }}"{% endif %}>
      
      <!-- Multiple formats for better browser support -->
      {% assign video_name = include.file | split: '.' | first %}
      <source src="/assets/videos/{{ video_name }}.mp4" type="video/mp4">
      <source src="/assets/videos/{{ video_name }}.webm" type="video/webm">
      
      <!-- Fallback text -->
      Your browser does not support the video tag. 
      <a href="/assets/videos/{{ include.file }}">Download the video</a>.
    </video>
    
    {% if include.caption %}
      <p class="video-caption">{{ include.caption }}</p>
    {% endif %}
  </div>
{% elsif include.youtube %}
  <!-- YouTube fallback -->
  <div class="video-wrapper">
    <iframe src="https://www.youtube.com/embed/{{ include.youtube }}?rel=0" 
            frameborder="0" allowfullscreen></iframe>
  </div>
{% endif %}